#!/usr/bin/env bash
set -euo pipefail

# Title: Install my unix programs
# Description: This scripts install my basic programs that I use day-by-day;
#              It has a lot of useful programs that I recommend. This list
#              will increase with time. Any suggestion are accepted. :-) 
# Tags: Install, Unix

# Debian Programs

# Update and upgrade libraries
echo "Updating system..."
sudo apt update -y && sudo apt upgrade -y

echo "Installing essential tools..."
sudo apt install -y \
    curl wget git build-essential g++ make cmake pkg-config \
    neovim tmux zsh htop btop tree jq ripgrep fzf bat fd-find zoxide \
    openssl xclip parallel

echo "Configuring monitoring stack..."
if command -v nvidia-smi >/dev/null 2>&1 || [[ -e "/dev/dri" ]]; then
    if apt-cache show nvtop >/dev/null 2>&1; then
        sudo apt install -y nvtop
        echo "✅ nvtop installed"
    else
        echo "ℹ️ nvtop package unavailable in apt repositories; skipping"
    fi
else
    echo "ℹ️ No GPU device detected; nvtop skipped"
fi

echo "Installing Python & ML dependencies..."
sudo apt install -y \
    python3 python3-pip python3-venv python3-dev python3-setuptools pylint \
    libffi-dev libopenblas-dev liblapack-dev gfortran libfreetype6-dev libpng-dev \
    libgit2-dev

echo "Installing Docker..."
curl -fsSL https://get.docker.com | sudo sh
sudo usermod -aG docker "$USER"

echo "Installing LaTeX (for reports/publications)..."
sudo apt install -y texlive-latex-extra texlive-fonts-recommended texlive-pictures

echo "Cleaning up..."
sudo apt autoremove -y && sudo apt clean
